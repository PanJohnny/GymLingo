---
import GroupShowcase from "../components/GroupShowcase.astro";
import UserInfo from "../components/UserInfo.astro";
import Layout from "../layouts/Layout.astro";
import Header1 from "../components/Header1.astro";
import { isValidUser } from "../util/database";

if (
	!Astro.cookies.has("token") ||
	!(await isValidUser(Astro.cookies.get("token").value))
)
	return Astro.redirect("/me/auth/login");
---

<Layout title="GymLingo" description="GymLingo - základy polštiny">
	<header>
		<UserInfo />
		{
			Astro.url.searchParams.has("welcome") ? (
				<>
					<div style="background-color: aqua; border: 1px solid black; position: absolute; max-width: 200px; left: 100px; padding: 5px;">
						TIP: Klepnutím na uživatelské jméno otevřete stránku na
						které si můžete změnit profilovku a další...
					</div>
					<h2>Vítejte na stránce!</h2>
				</>
			) : undefined
		}
		<Header1 />
	</header>
	<main>
		<nav>
			<a href="/slovnik">Veškerá evidovaná slovíčka naleznete zde</a>
		</nav>
		<GroupShowcase
			title="Zvířata"
			group="animals"
			image="/boars.jpg"
			image_desc='Foto <a href="https://pixabay.com/users/webandi-1460261/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=2256293">Andreas Lischka</a>'
		/>
		<GroupShowcase
			title="Základní fráze"
			group="phrases"
			image="/people.jpg"
			image_desc='Foto <a href="https://pixabay.com/users/mabelamber-1377835/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=3163556">Mabel Amber</a>'
		/>
		<GroupShowcase
			title="Testování nových stylů"
			group="test"
			image="/favicon.svg"
			image_desc="Vyzkoušejte si nové styly odpovědí"
		/>
	</main>
</Layout>

<style>
	header {
		display: flex;
		flex-direction: row;
		justify-content: space-between;
	}

	main {
		display: flex;
		margin: 2em;
		align-items: center;
		justify-content: center;
		flex-direction: column;
	}

	:global(main > *) {
		margin-bottom: 2em;
	}
</style>
